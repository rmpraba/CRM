<link rel="import" href="..\..\bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/iron-autogrow-textarea/iron-autogrow-textarea.html">
<link rel="import" href="../dateofbirth-datepicker/dateofbirth-datepicker.html">
<dom-module id="detailed-enquiry-form">
  <template>
    <div class="row enquiry-form">
      <div class="list-group col-sm-12 panel-body form-category">
          <div class="input-group custom-search-form col-sm-6 col-md-offset-3">
            <input type="text" class="form-control" id="searchtext" placeholder="Enter Enquiry Number">
            <span class="input-group-btn">
              <button class="btn btn-default" on-click="search" type="button">
                <i class="fa fa-search"></i>
              </button>
            </span>
          </div>
      </div>
      <div class="form-group-heading">
        <h4>Student Detail</h4>
      </div>
      <div class="list-group col-sm-12 panel-body form-category">
        <div class="col-sm-4 enquiry-input">
          <paper-input id="fname" required error-message="needs first name!" label="First Name" allowed-pattern="[a-zA-Z ]" value="{{firstname}}"></paper-input>
        </div>
        <div class="col-sm-4 enquiry-input">
          <paper-input id="mname" required error-message="needs middle name!" label="Middle Name" allowed-pattern="[a-zA-Z ]" value="{{middlename}}"></paper-input>
        </div>
        <div class="col-sm-4 enquiry-input">
          <paper-input id="lname" required error-message="needs last name!" label="Last Name" allowed-pattern="[a-zA-Z ]" value="{{lastname}}"></paper-input>
        </div>
      </div>
      <div class="list-group col-sm-12 panel-body form-category">
        <div class="col-sm-6 enquiry-input">
          <label>Gender</label>
          <div class="gender">
            <span class="col-sm-6"><paper-checkbox id="dfmale" class="checkbox" on-change="maleHandler">Male</paper-checkbox></span>
            <span class="col-sm-6"><paper-checkbox  id="dffemale" class="checkbox" on-change="femaleHandler">Female</paper-checkbox></span>
          </div>
        </div>
        <div class="col-sm-6 enquiry-input">
          <paper-input id="grade" required error-message="needs grade seeking for!" label="Class Admission Seeking for" value="{{grade}}"></paper-input>
        </div>
      </div>
      <div class="list-group col-sm-12 panel-body form-category">
        <div class="col-sm-4">
          <paper-input label="Date of Birth" value="{{dob}}"></paper-input>
        </div>
        <div class="col-sm-4">
          <paper-input label="Age as on 31st March 2016" value="{{age}}"></paper-input>
        </div>
        <div class="col-sm-4">
          <paper-dropdown-menu label="Mother Tongue" >
            <paper-menu id="language" class="dropdown-content" required on-iron-select="language" valueattr="value" >
              <paper-item >Assamese</paper-item>
              <paper-item >Bengali</paper-item>
              <paper-item >Bodo</paper-item>
              <paper-item >Dogri</paper-item>
              <paper-item >Gujarati</paper-item>
              <paper-item >Hindi</paper-item>
              <paper-item >Kannada</paper-item>
              <paper-item >Kashmiri</paper-item>
              <paper-item >Konkani</paper-item>
              <paper-item >Maithili</paper-item>
              <paper-item >Malayalam</paper-item>
              <paper-item >Manipuri</paper-item>
              <paper-item >Marathi</paper-item>
              <paper-item >Nepali</paper-item>
              <paper-item >Odia</paper-item>
              <paper-item >Punjabi</paper-item>
              <paper-item >Sanskrit</paper-item>
              <paper-item >Santali</paper-item>
              <paper-item >Sindhi</paper-item>
              <paper-item >Tamil</paper-item>
              <paper-item >Telugu</paper-item>
              <paper-item >Urdu</paper-item>
            </paper-menu>
          </paper-dropdown-menu>
        </div>
      </div>
      <div class="list-group col-sm-12 panel-body form-category">
        <div class="col-sm-6">
          <paper-input label="Present Class" id="oldsclass" required error-message="needs currently studying grade!" value="{{oldclass}}"></paper-input>
        </div>
        <div class="col-sm-6">
          <paper-input label="Present School" id="oldschool" required error-message="needs old school details!" value="{{oldschool}}"></paper-input>
        </div>
        
      </div>
      <div class="form-group-heading">
        <h4>Parent Detail</h4>
      </div>
      <div class="list-group col-sm-12 panel-body form-category">
        <div class="col-sm-6">
          <paper-input label="Father's Name" id="dadname" required error-message="needs father's name!" allowed-pattern="[a-zA-Z ]" value="{{fathername}}"></paper-input>
        </div>
        <div class="col-sm-6">
          <paper-input id="momname" required error-message="needs mother's name!" label="Mother's Name" allowed-pattern="[a-zA-Z ]" value="{{mothername}}"></paper-input>
        </div>
      </div>
      <div class="list-group col-sm-12 panel-body form-category">
        <div class="col-sm-6">
          <paper-input id="dadedu" required error-message="needs father's qualification!" allowed-pattern="[a-zA-Z ]" label="Father's Qualification" value="{{fatheredu}}"></paper-input>
        </div>
        <div class="col-sm-6">
          <paper-input id="momedu" required error-message="needs mother's qualification!" allowed-pattern="[a-zA-Z ]" label="Mother's Qualification" value="{{motheredu}}"></paper-input>
        </div>
      </div>
      <div class="list-group col-sm-12 panel-body form-category">
        <div class="col-sm-6">
          <paper-input id="dadmob" required error-message="needs father's mobile no!" label="Father's Contact Number" maxlength="10" allowed-pattern="[0-9]" value="{{fathermob}}"></paper-input>
        </div>
        <div class="col-sm-6">
          <paper-input id="mommob" required error-message="needs mother's mobile no!" label="Mother's Contact Number" maxlength="10" allowed-pattern="[0-9]" value="{{mothermob}}"></paper-input>
        </div>
      </div>
      <div class="list-group col-sm-12 panel-body form-category">
        <div class="col-sm-6">
          <paper-input id="dadmail" required error-message="needs father's email id!" label="Father's Email ID" value="{{fathermail}}"></paper-input>
        </div>
        <div class="col-sm-6">
          <paper-input id="mommail" required error-message="needs mother's email id!" label="Mother's Email ID" value="{{mothermail}}"></paper-input>
        </div>
      </div>
      <div class="form-group-heading">
        <h4>Parent Detail</h4>
      </div>
      <div class="list-group col-sm-12 panel-body form-category">
        <div class="col-sm-6">
          <paper-input id="dadoff" required error-message="needs father's company name!" allowed-pattern="[a-zA-Z ]" label="Company Name" value="{{fathercompany}}"></paper-input>
        </div>
        <div class="col-sm-6">
          <paper-input id="momoff" required error-message="needs mother's company name!" allowed-pattern="[a-zA-Z ]" label="Company Name" value="{{mothercompany}}"></paper-input>
        </div>
      </div>
      <div class="list-group col-sm-12 panel-body form-category">
        <div class="col-sm-6">
          <paper-input id="dadjob" required error-message="needs father's designation!" label="Designation" allowed-pattern="[a-zA-Z ]" value="{{fatherjob}}"></paper-input>
        </div>
        <div class="col-sm-6">
          <paper-input id="momjob" required error-message="needs mother's designation!" label="Designation" allowed-pattern="[a-zA-Z ]" value="{{motherjob}}"></paper-input>
        </div>
      </div>
      <div class="form-group-heading">
        <h4>Residential Address</h4>
      </div>
      <div class="list-group col-sm-12 panel-body form-category">
        <div class="col-sm-4">
          <paper-input label="Flat/House No" id="flat" required error-message="needs flat/House No!" value="{{flat}}"></paper-input>
        </div>
        <div class="col-sm-4">
          <paper-input label="Building Name" id="add1" required error-message="needs building name!" value="{{address1}}"></paper-input>
        </div>
        <div class="col-sm-4">
          <paper-input label="Street/Road" id="add2" required error-message="needs street/road name!" value="{{address2}}"></paper-input>
        </div>
      </div>
      <div class="list-group col-sm-12 panel-body form-category">
        <div class="col-sm-3">
          <paper-input label="Village/Town" id="add3" required error-message="needs village/town!" value="{{address3}}"></paper-input>
        </div>
        <div class="col-sm-3">
          <paper-input id="city" required allowed-pattern="[a-zA-Z ]" error-message="needs city name!" label="City" value="{{city}}"></paper-input>
        </div>
        <div class="col-sm-3">
          <paper-input label="State"></paper-input>
        </div>
        <div class="col-sm-3">
          <paper-input id="pin" required error-message="needs pincode!" allowed-pattern="[0-9]" maxlength="6" label="Pincode" value="{{pincode}}"></paper-input>
        </div>
      </div>
      <div class="list-group col-sm-12 panel-body form-category">
        <div class="col-sm-4">
          <paper-dropdown-menu label="Enquiry Source" >
            <paper-menu id="source" class="dropdown-content" required on-iron-select="source" valueattr="value" >
              <paper-item >Zee Television Ads</paper-item>
              <paper-item >Newspaper</paper-item>
              <paper-item >Print Media</paper-item>
              <paper-item >Poll Board</paper-item>
              <paper-item >Direction Boards</paper-item>
              <paper-item >Bounties</paper-item>
              <paper-item >FM/Radio</paper-item>
              <paper-item >BTL Activities</paper-item>
              <paper-item >Referrer</paper-item>
              <paper-item >Weblinks</paper-item>
              <paper-item >Website</paper-item>
              <paper-item >Siblings</paper-item>
            </paper-menu>
          </paper-dropdown-menu>
        </div>
        <div class="col-sm-4">
          <paper-input id="sibname" label="Names of siblinngs" value="{{siblingname}}"></paper-input>
        </div>
        <div class="col-sm-4">
          <paper-input id="sibdetail" label="Classes of siblinngs" value="{{siblingdetails}}"></paper-input>
        </div>
      </div>
      <div class="form-group-heading">
        <h4>Facility Detail</h4>
      </div>
      <div class="list-group col-sm-12 panel-body form-category">
        <div class="col-sm-4">
          Like to Avail Transport ?<span><paper-checkbox id="transportyes" class="checkbox" on-change="transportHandleryes">Yes</paper-checkbox></span>
          <span><paper-checkbox id="transportno" class="checkbox" on-change="transportHandlerno">No</paper-checkbox></span>
        </div>
        <div class="col-sm-4">
        Like to Avail Canteen Facility ?
          <span><paper-checkbox id="canteenyes" class="checkbox" on-change="canteenHandleryes">Yes</paper-checkbox></span>
          <span><paper-checkbox id="canteenno" class="checkbox" on-change="canteenHandlerno">No</paper-checkbox></span>
        </div>
        <div class="col-sm-4">
        Prospectus sold or not ?
          <span><paper-checkbox id="prosoldyes" class="checkbox" on-change="prosoldHandleryes">Yes</paper-checkbox></span>
          <span><paper-checkbox id="prosoldno" class="checkbox" on-change="prosoldHandlerno">No</paper-checkbox></span>
        </div>
      </div>
      <div class="form-group-heading">
        <h4>Language Preferences</h4>
      </div>
      <div class="list-group col-sm-12 panel-body form-category">
        <div class="col-sm-6">
            <span class="col-sm-12"><h5>2nd Language</h5></span>
          <span><paper-checkbox class="col-sm-6" id="secondhindi" class="checkbox" on-change="secondhindiHandler">Hindi</paper-checkbox></span>
          <span><paper-checkbox class="col-sm-6" id="secondkannada" class="checkbox" on-change="secondkannadaHandler">Kannada</paper-checkbox></span>
        </div>
        <div class="col-sm-6">
          <span class="col-sm-12"><h5>3rd Language</h5></span>
          <span><paper-checkbox class="col-sm-3" id="thirdfrench" class="checkbox" on-change="thirdfrenchHandler">French</paper-checkbox></span>
          <span><paper-checkbox class="col-sm-3" id="thirdsanskrit" class="checkbox" on-change="thirdsanskritHandler">Sanskrit</paper-checkbox></span>
          <span><paper-checkbox class="col-sm-3" id="thirdkannada" class="checkbox" on-change="thirdkannadaHandler">Kannada</paper-checkbox></span>
          <span><paper-checkbox class="col-sm-3" id="thirdhindi" class="checkbox" on-change="thirdhindiHandler">Hindi</paper-checkbox></span>
        </div>
      </div>
      <div class="col-md-12 form-button">
        <paper-button class="btn btn-primary" on-click="submit">SUBMIT</paper-button>
      </div>


       <crm-service id="service"></crm-service>
    </div>
  </template>
  <script>
  (function() {
    'use strict';
        var fngender;
        var secondlanguage;
        var thirdlanguage;
        var transportreq;
        var canteenreq;
        var enquiysource;
        var enqno;
        var propsold;
        var mothertongue;
    Polymer({
      is: 'detailed-enquiry-form',
      ready:function(){
          this.$.sibname.disabled=true;
          this.$.sibdetail.disabled=true;
      },
      search:function(){
        enqno=document.getElementById('searchtext').value;
        //alert(this.enqno+'    '+enqno);
        this.$.service.getenqirydetails(enqno);
      },
      Fnresult:function(dob,gender){
        //alert(gender);
        var dt1=new Date(dob);

          var dt=new Date();
          var pr_year=dt.getFullYear();
          var bt_year=dt1.getFullYear();
          var diff=parseInt(pr_year-bt_year);
          //alert(diff);
          this.age=diff+" Years";

          if(gender=='Male'){
            fngender="Male";
           document.querySelector("#dfmale").checked=true;
           document.querySelector("#dffemale").checked=false;
           }
           else{
            fngender="Female";
            document.querySelector("#dfmale").checked=false;
           document.querySelector("#dffemale").checked=true;
           }
    },
    maleHandler:function(){
      if(document.querySelector("#male").checked==true)
        {
         document.querySelector("#female").checked=false;
         fngender="Male";
         //alert(gender);
       }
       else{
        fngender=null;
       }
    },
    femaleHandler:function(){
      if(document.querySelector("#female").checked==true)
        {
         document.querySelector("#male").checked=false;
         fngender="Female";
         //alert(gender);
       }
       else{
        fngender=null;
       }
    },
    transportHandleryes:function(){
      if(document.querySelector("#transportyes").checked==true)
      {
        transportreq="yes";
        document.querySelector("#transportno").checked=false;
      }
      else{
        transportreq=null;
      }
    },
    transportHandlerno:function(){
        if(document.querySelector("#transportno").checked==true)
      {
        transportreq="no";
        document.querySelector("#transportyes").checked=false;
      }
      else{
        transportreq=null;
      }

    },
    canteenHandleryes:function(){
      if(document.querySelector("#canteenyes").checked==true)
      {
        canteenreq="yes";
        document.querySelector("#canteenno").checked=false;
      }
      else{
        canteenreq=null;
      }

    },
    canteenHandlerno:function(){
      if(document.querySelector("#canteenno").checked==true)
      {
        canteenreq="no";
        document.querySelector("#canteenyes").checked=false;
      }
      else{
        canteenreq=null;
      }
    },
    prosoldHandleryes:function(){
      if(document.querySelector("#prosoldyes").checked==true)
      {
        propsold="yes";
        document.querySelector("#prosoldno").checked=false;
      }
      else{
        propsold=null;
      }
    },
    prosoldHandlerno:function(){
        if(document.querySelector("#prosoldno").checked==true)
      {
        propsold="no";
        document.querySelector("#prosoldyes").checked=false;
      }
      else{
        propsold=null;
      }
     
    },
    secondhindiHandler:function(){
      if(document.querySelector("#secondhindi").checked==true){
        secondlanguage="Hindi";
        document.querySelector("#secondkannada").checked=false;
      }
      else{
        secondlanguage=null;
      }
    },
    secondkannadaHandler:function(){
      if(document.querySelector("#secondkannada").checked==true){
        secondlanguage="Kannada";
        document.querySelector("#secondhindi").checked=false;
      }
      else{
        secondlanguage=null;
      }
    },
    thirdfrenchHandler:function(){
      if(document.querySelector("#thirdfrench").checked==true){
        thirdlanguage="French";
        document.querySelector("#thirdhindi").checked=false;
        document.querySelector("#thirdkannada").checked=false;
        document.querySelector("#thirdsanskrit").checked=false;
      }
      else{
        thirdlanguage=null;
      }
    },
    thirdhindiHandler:function(){
      if(document.querySelector("#thirdhindi").checked==true){
        if(secondlanguage=='Hindi'){
            alert("Kindly select different third language");
            document.querySelector("#thirdhindi").checked=false;
        }
        else{
            thirdlanguage="Hindi";
        }

        document.querySelector("#thirdfrench").checked=false;
        document.querySelector("#thirdkannada").checked=false;
        document.querySelector("#thirdsanskrit").checked=false;
      }
      else{
        thirdlanguage=null;
      }
    },
    thirdkannadaHandler:function(){
      if(document.querySelector("#thirdkannada").checked==true){
        if(secondlanguage=='Kannada'){
            alert("Kindly select different third language");
            document.querySelector("#thirdhindi").checked=false;
        }
        else{
            thirdlanguage="Kannada";
        }
        document.querySelector("#thirdfrench").checked=false;
        document.querySelector("#thirdhindi").checked=false;
        document.querySelector("#thirdsanskrit").checked=false;
      }
      else{
        thirdlanguage=null;
      }
    },
    thirdsanskritHandler:function(){
      if(document.querySelector("#thirdsanskrit").checked==true){
        thirdlanguage="Sanskrit";
        document.querySelector("#thirdfrench").checked=false;
        document.querySelector("#thirdhindi").checked=false;
        document.querySelector("#thirdkannada").checked=false;
      }
      else{
        thirdlanguage=null;
      }
    },
    source:function(e){
        enquiysource=(e.target.selectedItem.textContent).trim();

        if(enquiysource=="Siblings"){
          this.$.sibname.disabled=false;
          this.$.sibdetail.disabled=false;
        }else{
          this.$.sibname.disabled=true;
          this.$.sibdetail.disabled=true;
        }
    },
    language:function(){
        mothertongue=(e.target.selectedItem.textContent).trim();
    },
    submit:function(){
      if(this.firstname==""||this.middlename==""||this.lastname==""||this.grade==""||this.oldclass==""||this.oldschool==""||this.mothertongue==""||this.fathername==""||this.mothername==""||this.fatheredu==""||this.motheredu==""||this.fathermob==""||this.mothermob==""||this.fathermail==""||this.mothermail==""||this.fathercompany==""||this.mothercompany==""||this.fatherjob==""||this.motherjob==""||this.address1==""||this.address2==""||this.address3==""||this.city==""||this.pincode==""){
          this.$.fname.validate();
          this.$.mname.validate();
          this.$.lname.validate();
          this.$.grade.validate();
          this.$.oldschool.validate();
          this.$.oldclass.validate();
          this.$.dadname.validate();
          this.$.momname.validate();
          this.$.dadedu.validate();
          this.$.momedu.validate();
          this.$.dadmob.validate();
          this.$.dadmail.validate();
          this.$.mommob.validate();
          this.$.mommail.validate();
          this.$.dadjob.validate();
          this.$.dadoff.validate();
          this.$.momjob.validate();
          this.$.momoff.validate();
          this.$.add1.validate();
          this.$.add2.validate();
          this.$.add3.validate();
          this.$.city.validate();
          this.$.pin.validate();
      }
      else if(fngender==null){
          alert('Select the gender of the student');
      }
      else if(enquiysource==null){
          alert('Select the enquiry source');
      }
      else if(mothertongue==null){
          alert('Select the mother tongue');
      }
      else if(transportreq==null){
          alert('Select the transport requirment');
      }
      else if(canteenreq==null){
          alert('Select the canteen requirment');
      }
      else if(secondlanguage==null){
          alert('Select the second language');
      }
      else if(thirdlanguage==null){
          alert('Select the third language');
      }
      else if(propsold==null){
          alert('Prospectus sold status is not marked');
      }
      else{
      this.$.service.updateenquiryform(enqno,this.firstname,this.middlename,this.lastname,fngender,this.grade,this.dob,this.oldclass,this.oldschool,mothertongue,this.fathername,this.mothername,this.fatheredu,this.motheredu,this.fathermob,this.mothermob,this.fathermail,this.mothermail,this.fathercompany,this.mothercompany,this.fatherjob,this.motherjob,this.address1,this.address2,this.address3,this.city,this.pincode,enquiysource,this.siblingname,this.siblingdetails,transportreq,canteenreq,secondlanguage,thirdlanguage,propsold);
    }
}
    });
  })();
  </script>
</dom-module>
