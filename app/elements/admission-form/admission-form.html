<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<link rel="import" href="..\..\bower_components/polymer/polymer.html">
<link rel="import" href="../dateofbirth-datepicker/dateofbirth-datepicker.html">

<dom-module id="admission-form">
  <template>


      
   <div class="row enquiry-form">
      <div class="list-group col-sm-12 panel-body form-category">
          <div class="input-group col-sm-5 ">
            <input type="text" class="form-control" id="searchenquiry" placeholder="Enter Enquiry Number/Name" >
            <span class="input-group-btn">
              <button class="btn btn-default" on-click="FnSearchEnquiry" type="button">
                <i class="fa fa-search"></i>
              </button>
            </span>
          </div>
          <div class="col-sm-7 ">            
            <span class="input-group-btn">
              <paper-dropdown-menu label="Select Enquiry No" on-iron-select="FnSelectEnquiry">
                <paper-listbox class="dropdown-content">
                  <template  is="dom-repeat" items="{{enquiryarr}}" as="item">
                  <paper-item>{{item.enquiry_no}}-{{item.enquiry_name}}</paper-item> 
                  </template>                 
                </paper-listbox>
              </paper-dropdown-menu>
            </span>
          </div>
    </div>
    </div>
      
    
    <div class="row enquiry-form">
      <div class="list-group col-sm-12 panel-body form-category">
        <div class="col-sm-6 enquiry-input">
          <paper-input label="Application Number" readonly value=""></paper-input>
        </div>
        <div class="col-sm-6">
          <paper-textarea label="School" readonly value=""></paper-textarea>
        </div>
      </div>
      <div class="list-group col-sm-12 panel-body form-category">
        <div class="col-sm-6 enquiry-input">

          <paper-input label="Enquired Year" value="{{enquiredyear}}"></paper-input>
        </div>
        <div class="col-sm-6 enquiry-input">
          <paper-dropdown-menu label="Admission Year" on-iron-select="FnSelectAdmissionYear" attr-for-selected="value">
              <paper-listbox class="dropdown-content">                
                  <paper-item value="AY-2016-2017">AY-2016-2017</paper-item> 
                  <paper-item value="AY-2017-2018">AY-2017-2018</paper-item>                               
              </paper-listbox>
          </paper-dropdown-menu>

          <paper-textarea label="Contact Number" readonly value=""></paper-textarea>

        </div>
      </div>
      <div class="list-group col-sm-12 panel-body form-category">
        <div class="col-sm-4">
          <paper-input label="Student First Name" value="{{studentname}}"></paper-input>
        </div>
        <div class="col-sm-4">
          <paper-input label="Student Middle Name" value="{{studentname}}"></paper-input>
        </div>
        <div class="col-sm-4">
          <paper-input label="Student Last Name" value="{{studentname}}"></paper-input>
        </div>
      </div>
      <div class="list-group col-sm-12 panel-body form-category">
        <div class="col-sm-6">
          <paper-dropdown-menu label="Seeking Admission for Class" style="width: 100%;">
            <paper-menu id="zone" class="dropdown-content" required on-iron-select="classes" valueattr="value" >
              <template  is="dom-repeat" items="{{itemarr}}" as="view">
                <paper-item value="{{view.class}}">{{view.class}}</paper-item>
              </template>
            </paper-menu>
          </paper-dropdown-menu>
        </div>
      </div>
      <div class="list-group col-sm-12 panel-body form-category">
        <div class="col-sm-6">
          <span class="col-sm-12"><h5>2nd Language</h5></span>
          <span><paper-checkbox class="col-sm-6" id="male" readonly class="checkbox" on-change="maleHandler">Hindi</paper-checkbox></span>
          <span><paper-checkbox class="col-sm-6" id="male" readonly class="checkbox" on-change="maleHandler">Kannada</paper-checkbox></span>
        </div>
        <div class="col-sm-6">
          <span class="col-sm-12"><h5>3rd Language</h5></span>
          <span><paper-checkbox class="col-sm-3" id="male" readonly class="checkbox" on-change="maleHandler">French</paper-checkbox></span>
          <span><paper-checkbox class="col-sm-3" id="male" readonly class="checkbox" on-change="maleHandler">Sanskrit</paper-checkbox></span>
          <span><paper-checkbox class="col-sm-3" id="male" readonly class="checkbox" on-change="maleHandler">Kannada</paper-checkbox></span>
          <span><paper-checkbox class="col-sm-3" id="male" readonly class="checkbox" on-change="maleHandler">Hindi</paper-checkbox></span>
        </div>
      </div>
      <div class="list-group col-sm-12 panel-body form-category">
        <div class="col-sm-6">
          <dateofbirth-datepicker></dateofbirth-datepicker>
        </div>
        <div class="col-sm-6">
          <paper-input label="Age as on 31st March 2016" value="{{age}}"></paper-input>
        </div>
      </div>
      <div class="list-group col-sm-12 panel-body form-category">
        <div class="col-sm-8 enquiry-input">
          <span class="col-sm-4"><h5>Gender</h5></span>
          <span class="col-sm-4"><paper-checkbox id="male" readonly class="checkbox" on-change="maleHandler">Male</paper-checkbox></span>
          <span class="col-sm-4"><paper-checkbox  id="female" readonly class="checkbox" on-change="femaleHandler">Female</paper-checkbox></span>
        </div>
      </div>
      <div class="form-group-heading">
        <h4>Present Address</h4>
      </div>
      <div class="list-group col-sm-12 panel-body form-category">
        <div class="col-sm-4">
          <paper-input label="Flat/House No"></paper-input>
        </div>
        <div class="col-sm-4">
          <paper-input label="Building Name"></paper-input>
        </div>
        <div class="col-sm-4">
          <paper-input label="Street/Road"></paper-input>
        </div>
      </div>
      <div class="list-group col-sm-12 panel-body form-category">
        <div class="col-sm-3">
          <paper-input label="Village/Town"></paper-input>
        </div>
        <div class="col-sm-3">
          <paper-input label="City"></paper-input>
        </div>
        <div class="col-sm-3">
          <paper-input label="State"></paper-input>
        </div>
        <div class="col-sm-3">
          <paper-input label="Pincode"></paper-input>
        </div>
      </div>
      <div class="form-group-heading">
        <h4>Medical Information</h4>
      </div>
      <div class="list-group col-sm-12 panel-body form-category">
        <div class="col-sm-4">
          <paper-input label="Height"></paper-input>
        </div>
        <div class="col-sm-4">
          <paper-input label="Weight"></paper-input>
        </div>
        <div class="col-sm-4">
          <paper-dropdown-menu label="Blood Group" style="width: 100%;">
            <paper-listbox class="dropdown-content" on-iron-select="FnBloodGroup">
              <paper-item>A +ve</paper-item>
              <paper-item>A -ve</paper-item>
              <paper-item>B +ve</paper-item>
              <paper-item>B -ve</paper-item>
              <paper-item>O +ve</paper-item>
              <paper-item>O -ve</paper-item>
              <paper-item>AB +ve</paper-item>
              <paper-item>AB -ve</paper-item>
            </paper-listbox>
          </paper-dropdown-menu>
        </div>
      </div>
      <div class="list-group col-sm-12 panel-body form-category">
        <div class="col-sm-8">
          <span class="col-sm-12"><h5>Caste</h5></span>
          <span><paper-checkbox class="col-sm-2" id="male" readonly class="checkbox" on-change="maleHandler">SC</paper-checkbox></span>
          <span><paper-checkbox class="col-sm-2" id="male" readonly class="checkbox" on-change="maleHandler">ST</paper-checkbox></span>
          <span><paper-checkbox class="col-sm-2" id="male" readonly class="checkbox" on-change="maleHandler">SC</paper-checkbox></span>
          <span><paper-checkbox class="col-sm-2" id="male" readonly class="checkbox" on-change="maleHandler">OBC</paper-checkbox></span>
          <span><paper-checkbox class="col-sm-2" id="male" readonly class="checkbox" on-change="maleHandler">Other</paper-checkbox></span>
        </div>
        <div class="col-sm-4">
          <paper-input label="Relegion"></paper-input>
        </div>
      </div>
      <div class="list-group col-sm-12 panel-body form-category">
        <div class="col-sm-6">
          <paper-input label="Nationality"></paper-input>
        </div>
        <div class="col-sm-6">
          <paper-input label="Mother Tongue"></paper-input>
        </div>
      </div>
      <div class="form-group-heading">
        <h4>Sibling Information</h4>
      </div>
      <div class="list-group col-sm-12 panel-body form-category">
        <div class="col-sm-6">
          <paper-input label="Sibling Name"></paper-input>
        </div>
        <div class="col-sm-6">
          <paper-input label="Sibling Class"></paper-input>
        </div>
      </div>
      <div class="form-group-heading">
        <h4>Record of Previous Class Attended</h4>
      </div>
      <div class="list-group col-sm-12 panel-body form-category">
        <div class="col-sm-6">
          <paper-input label="Name of School"></paper-input>
        </div>
        <div class="col-sm-3">
          <paper-input label="Class From"></paper-input>
        </div>
        <div class="col-sm-3">
          <paper-input label="Class To"></paper-input>
        </div>
      </div>
      <div class="list-group col-sm-12 panel-body form-category">
        <div class="col-sm-6">
          <paper-dropdown-menu label="Board" style="width: 100%;">
            <paper-listbox class="dropdown-content" on-iron-select="FnBoard">
              <paper-item>CBSE</paper-item>
              <paper-item>ICSE</paper-item>
              <paper-item>State</paper-item>
            </paper-listbox>
          </paper-dropdown-menu>
        </div>
        <div class="col-sm-3">
          <paper-input label="Year From"></paper-input>
        </div>
        <div class="col-sm-3">
          <paper-input label="Year To"></paper-input>
        </div>
      </div>
      <div class="list-group col-sm-12 panel-body form-category">
        <div class="col-sm-5">
          <paper-input label="Medium of Instruction"></paper-input>
        </div>
        <div class="col-sm-7">
          <paper-input label="% of Marks in Last Class"></paper-input>
        </div>
      </div>
      <div class="list-group col-sm-12 panel-body form-category">
        <paper-textarea label="Reason for Leaving"></paper-textarea>
      </div>
      <div class="form-group-heading">
        <h4>Physical/Mental Disability and Mental History(if any)</h4>
      </div>
      <div class="list-group col-sm-12 panel-body form-category">
        <div class="col-sm-6">
          <paper-textarea label="Physical Disability Detail"></paper-textarea>
        </div>
        <div class="col-sm-6">
          <paper-input label="Physical Disability Present Status"></paper-input>
        </div>
      </div>
      <div class="list-group col-sm-12 panel-body form-category">
        <div class="col-sm-6">
          <paper-textarea label="Mental Disability Detail"></paper-textarea>
        </div>
        <div class="col-sm-6">
          <paper-input label="Mental Disability Present Status"></paper-input>
        </div>
      </div>
      <div class="list-group col-sm-12 panel-body form-category">
        <div class="col-sm-6">
          <paper-textarea label="Past Illness Detail"></paper-textarea>
        </div>
        <div class="col-sm-6">
          <paper-input label="Past Illness Present Status"></paper-input>
        </div>
      </div>
      <div class="list-group col-sm-12 panel-body form-category">
        <div class="col-sm-6">
          <paper-textarea label="Allergy Detail"></paper-textarea>
        </div>
        <div class="col-sm-6">
          <paper-input label="Allergy Present Status"></paper-input>
        </div>
      </div>
      <div class="list-group col-sm-12 panel-body form-category">
        <div class="col-sm-6">
          <paper-textarea label="Chronic Medical Problem Detail"></paper-textarea>
        </div>
        <div class="col-sm-6">
          <paper-input label="Chronic Medical Problem Present Status"></paper-input>
        </div>
      </div>
      <div class="form-group-heading">
        <h4>Achievements in Academic/Sports/Co-Curricular Field</h4>
      </div>
      <div class="list-group col-sm-12 panel-body form-category">
        <div class="col-sm-1">
          <paper-textarea label="S.No"></paper-textarea>
        </div>
        <div class="col-sm-3">
          <paper-textarea label="Field"></paper-textarea>
        </div>
        <div class="col-sm-1">
          <paper-textarea label="Year"></paper-textarea>
        </div>
        <div class="col-sm-3">
          <paper-textarea label="Event"></paper-textarea>
        </div>
        <div class="col-sm-3">
          <paper-textarea label="Details of Prize/Awards/POsition"></paper-textarea>
        </div>
      </div>

      <div class="list-group col-sm-12 panel-body form-category">
        <div class="col-sm-1">
          <paper-textarea label="S.No"></paper-textarea>
        </div>
        <div class="col-sm-3">
          <paper-textarea label="Field"></paper-textarea>
        </div>
        <div class="col-sm-1">
          <paper-textarea label="Year"></paper-textarea>
        </div>
        <div class="col-sm-3">
          <paper-textarea label="Event"></paper-textarea>
        </div>
        <div class="col-sm-3">
          <paper-textarea label="Details of Prize/Awards/POsition"></paper-textarea>
        </div>
      </div>
      <div class="list-group col-sm-12 panel-body form-category">
        <div class="col-sm-1">
          <paper-textarea label="S.No"></paper-textarea>
        </div>
        <div class="col-sm-3">
          <paper-textarea label="Field"></paper-textarea>
        </div>
        <div class="col-sm-1">
          <paper-textarea label="Year"></paper-textarea>
        </div>
        <div class="col-sm-3">
          <paper-textarea label="Event"></paper-textarea>
        </div>
        <div class="col-sm-3">
          <paper-textarea label="Details of Prize/Awards/POsition"></paper-textarea>
        </div>
      </div>
      <div class="form-group-heading">
        <h4>Particulars of Family</h4>
      </div>
      <div class="list-group col-sm-12 panel-body form-category">
        <div class="col-sm-6">
          <paper-input label="Father's Name"></paper-input>
        </div>
        <div class="col-sm-6">
          <paper-input label="Mother's Name"></paper-input>
        </div>
      </div>
      <div class="list-group col-sm-12 panel-body form-category">
        <div class="col-sm-6">
          <paper-input label="Father's Date of Birth"></paper-input>
        </div>
        <div class="col-sm-6">
          <paper-input label="Mother's Date of Birth"></paper-input>
        </div>
      </div>
      <div class="list-group col-sm-12 panel-body form-category">
        <div class="col-sm-6">
          <paper-input label="Father's Edn. Professional Qualification"></paper-input>
        </div>
        <div class="col-sm-6">
          <paper-input label="Mother's Edn. Professional Qualification"></paper-input>
        </div>
      </div>
      <div class="list-group col-sm-12 panel-body form-category">
        <div class="col-sm-6">
          <paper-input label="Father's Occupation"></paper-input>
        </div>
        <div class="col-sm-6">
          <paper-input label="Mother's Occupation"></paper-input>
        </div>
      </div>
      <div class="list-group col-sm-12 panel-body form-category">
        <div class="col-sm-6">
          <paper-input label="Father's Annual Income"></paper-input>
        </div>
        <div class="col-sm-6">
          <paper-input label="Mother's Annual Income"></paper-input>
        </div>
      </div>
      <div class="list-group col-sm-12 panel-body form-category">
        <div class="col-sm-6">
          <paper-input label="Father's Office Tel.No"></paper-input>
        </div>
        <div class="col-sm-6">
          <paper-input label="Mother's Office Tel.No"></paper-input>
        </div>
      </div>
      <div class="list-group col-sm-12 panel-body form-category">
        <div class="col-sm-6">
          <paper-input label="Father's Mobile"></paper-input>
        </div>
        <div class="col-sm-6">
          <paper-input label="Mother's Mobile"></paper-input>
        </div>
      </div>
      <div class="list-group col-sm-12 panel-body form-category">
        <div class="col-sm-6">
          <paper-input label="Father's Email ID"></paper-input>
        </div>
        <div class="col-sm-6">
          <paper-input label="Mother's Email ID"></paper-input>
        </div>
      </div>
      <div class="form-group-heading">
        <h4>Permanent Residential Address</h4>
      </div>
      <div class="list-group col-sm-12 panel-body form-category">
        <div class="col-sm-6">
          <paper-input label="Village/Town"></paper-input>
        </div>
        <div class="col-sm-6">
          <paper-input label="District"></paper-input>
        </div>
      </div>
      <div class="list-group col-sm-12 panel-body form-category">
        <div class="col-sm-6">
          <paper-input label="State"></paper-input>
        </div>
        <div class="col-sm-6">
          <paper-input label="Pincode"></paper-input>
        </div>
      </div>
      <div class="form-group-heading">
        <h4>Local Guardian</h4>
      </div>
      <div class="list-group col-sm-12 panel-body form-category">
        <div class="col-sm-6">
          <paper-input label="Relationship"></paper-input>
        </div>
        <div class="col-sm-6">
          <paper-input label="Guardian's Name"></paper-input>
        </div>
      </div>
      <div class="list-group col-sm-12 panel-body form-category">
        <div class="col-sm-6">
          <paper-input label="Relationship"></paper-input>
        </div>
        <div class="col-sm-6">
          <paper-input label="Guardian's Name"></paper-input>
        </div>
      </div>
      <div class="list-group col-sm-12 panel-body form-category">
        <div class="col-sm-4">
          <paper-input label="Flat/House No"></paper-input>
        </div>
        <div class="col-sm-4">
          <paper-input label="Building Name"></paper-input>
        </div>
        <div class="col-sm-4">
          <paper-input label="Street/Road"></paper-input>
        </div>
      </div>
      <div class="list-group col-sm-12 panel-body form-category">
        <div class="col-sm-3">
          <paper-input label="Village/Town"></paper-input>
        </div>
        <div class="col-sm-3">
          <paper-input label="City"></paper-input>
        </div>
        <div class="col-sm-3">
          <paper-input label="State"></paper-input>
        </div>
        <div class="col-sm-3">
          <paper-input label="Pincode"></paper-input>
        </div>
      </div>
      <div class="list-group col-sm-12 panel-body form-category">
        <div class="col-sm-6">
          <paper-input label="Contact No (Residential)"></paper-input>
        </div>
        <div class="col-sm-6">
          <paper-input label="Contact No (Office)"></paper-input>
        </div>
      </div>
      <div class="list-group col-sm-12 panel-body form-category">
        <div class="col-sm-6">
          <paper-input label="Mobile Number"></paper-input>
        </div>
        <div class="col-sm-6">
          <paper-input label="Fax"></paper-input>
        </div>
      </div>
      <div class="form-group-heading">
        <h4>Acknowledgement</h4>
      </div>
      <div class="list-group col-sm-12 panel-body form-category">
       <p class="p">I certify that information furnished above is complete and correct to the best of my knowledge</p>
        <div class="col-sm-6">
          <paper-input label="Date"></paper-input>
        </div>
        <div class="col-sm-6">
          <paper-input label="Signature of Father/Mother/Guardian"></paper-input>
        </div>
        <div class="col-sm-6">
          <paper-input label="Place"></paper-input>
        </div>
      </div>
      <div class="form-group-heading">
        <h4>For Office Use Only</h4>
      </div>
      <div class="list-group col-sm-12 panel-body form-category">
        <div class="col-sm-6">
          <paper-input label="Applied for admission in class"></paper-input>
        </div>
      </div>
      <div class="list-group col-sm-12 panel-body form-category">
        <div class="col-sm-6">
          <paper-input label="Granted admission in class"></paper-input>
        </div>
        <div class="col-sm-6">
          <paper-input label="Authorised Signatory"></paper-input>
        </div>
      </div>


       <div class="list-group col-sm-12 panel-body form-category">
        <div class="col-sm-4">
          Like to Avail Transport ?<span><paper-checkbox id="Tyes" class="checkbox" on-change="transportHandler">Yes</paper-checkbox></span>
          <span><paper-checkbox id="Tno" class="checkbox" on-change="transportHandler">No</paper-checkbox></span>
        </div>
        <div class="col-sm-4">
        Like to Avail Canteen Facility ?
          <span><paper-checkbox id="Cyes" class="checkbox" on-change="canteenHandler">Yes</paper-checkbox></span>
          <span><paper-checkbox id="Cno" class="checkbox" on-change="canteenHandler">No</paper-checkbox></span>
        </div>
        <div class="col-sm-4">
        Disabled student ?
          <span><paper-checkbox id="Dyes" class="checkbox" on-change="disabledHandler">Yes</paper-checkbox></span>
          <span><paper-checkbox id="Dno" class="checkbox" on-change="disabledHandler">No</paper-checkbox></span>
        </div>
      </div>

    <div class="col-md-12 form-button">
        <paper-button class="btn btn-primary" on-click="submit">SUBMIT</paper-button>
      </div>
    </div>
    <!--Calling services-->
    <admission-service id="admissionservice"></admission-service>
    <crm-service id="crmservice"></crm-service>
  </template>
  <script>
  (function() {
    'use strict';
    var admissionyear;
    var admissiongrade;
    var admissiondob;
    var admissiongender;
    var admissiontransport;
    var admissioncanteen;
    var admissiondisabled;
    Polymer({
      is: 'admission-form',


      FnSearchEnquiry:function(){ 
        this.$.crmservice.getclasses();
        var enquiryno=document.getElementById('searchenquiry').value;        
        this.$.admissionservice.callSearchenquiryService(enquiryno);
      },
      FnSelectEnquiry:function(e){        
        var enquiry=(e.target.selectedItem.textContent).trim();        
        var inx=enquiry.indexOf('-');
        var enquiry_no=enquiry.substring(0,inx);
        var enquiry_name=enquiry.substring(inx+1);
        localStorage.setItem("curr_sess_enquiryno",enquiry_no);
        localStorage.setItem("curr_sess_enquiryname",enquiry_name); 
        this.$.admissionservice.callFetchenquiryinfoService();       
      },
      FnSetSecLanguage:function(value){
        // alert(value);
        // alert(document.querySelector("#"+value));
        document.querySelector("#"+value).checked=true;
      },
      FnSetThirdLanguage:function(value){
        document.querySelector("#"+value).checked=true;
      },
      FnSetTransport:function(value){
        admissiontransport=value;
        document.querySelector("#T"+value).checked=true;
      },
      FnSetCanteen:function(value){
        admissioncanteen=value;
        document.querySelector("#C"+value).checked=true;
      },
      FnSetGender:function(value){
        admissiongender=value;
        document.querySelector("#"+value).checked=true;
      },
      FnFindAge:function(value){
          admissiondob=value;
          var dt1=new Date(value);
          var dobdate=value;
          var dt=new Date();
          var pr_year=dt.getFullYear();
          var bt_year=dt1.getFullYear();
          var diff=parseInt(pr_year-bt_year);          
          this.age=diff+" Years";        
      },
      FnSelectAdmissionYear:function(e){
        admissionyear=(e.target.selectedItem.textContent).trim();

      },
      FnSelectGrade:function(e){
        admissiongrade=(e.target.selectedItem.textContent).trim();
      },
      genderHandler:function(e){        
        admissiongender=e.target.id;
      },
      transportHandler:function(e){
        admissiontransport=e.target.id;
        admissiontransport=admissiontransport.substring(1);
      },
      canteenHandler:function(e){
        admissioncanteen=e.target.id;
        admissioncanteen=admissioncanteen.substring(1);
      },
      disabledHandler:function(e){
        admissiondisabled=e.target.id;
        admissiondisabled=admissiondisabled.substring(1);
      },
      FnSubmitAdmission:function(){
        // alert(this.applicationno+"  "+this.schoolname+"  "+admissionyear+"  "+this.firstname+"  "+this.middlename+" "+this.lastname+" "+admissiongrade+"  "+admissiondob+" "+admissiongender+" "+admissiondisabled+" "+admissioncanteen+" "+admissiontransport);
        this.$.admissionservice.callInsertAdmissionService(this.applicationno,this.schoolname,admissionyear,this.firstname,this.middlename,this.lastname,admissiongrade,admissiondob,admissiongender,admissiondisabled,admissioncanteen,admissiontransport,this.fathername,this.mothername);
      }

    });
  })();
  </script>
</dom-module>
